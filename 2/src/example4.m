%% example4.m - Двовимірна кореляція оригіналу та негативу

D = imread('rock.jpg');  

% Перетворюємо зображення в градації сірого та тип double [0,1]
I = im2double(rgb2gray(D));  

% Обчислюємо двовимірну автокореляцію (зображення зі самим собою)
c1 = xcorr2(I, I);  

% Знаходимо максимальне значення пікселя в зображенні
MaI = max(I(:));  

% Створюємо негатив зображення (темні стають світлішими і навпаки)
NI = MaI - I;  

% Обчислюємо двовимірну кореляцію оригіналу з його негативом
c2 = xcorr2(I, NI);  

% Візуалізація результатів в одному вікні
figure('Name','Кореляційні функції','NumberTitle','off');

% Ліва частина: автокореляція
show_mesh(1, c1, 'autocorr.function');

% Права частина: кореляція з негативом
show_mesh(2, c2, 'corr.function');


function show_mesh(i, c, t)
    subplot(1,2,i); 
    mesh(c);  
    title(t); 
    xlabel('X'); ylabel('Y'); zlabel('Correlation');
end 

